digraph G {
  rankdir=LR;
  node [style=rounded];
  "api-gateway" [shape=box];
  "auth-service" [shape=box];
  "billing-service" [shape=box];
  "catalog-service" [shape=box];
  "email-service" [shape=box];
  "notification-service" [shape=box];
  "order-service" [shape=box];
  "payment-service" [shape=box];
  "search-service" [shape=box];
  "user-service" [shape=box];
  "orders-db" [shape=cylinder];
  "payments-db" [shape=cylinder];
  "shared-catalog-db" [shape=cylinder];
  "users-db" [shape=cylinder];
  "api-gateway" -> "auth-service" [label="/validate", style=solid];
  "api-gateway" -> "catalog-service" [label="/list", style=solid];
  "api-gateway" -> "search-service" [label="/search", style=solid];
  "api-gateway" -> "user-service" [label="/me", style=solid];
  "api-gateway" -> "order-service" [label="/order", style=solid];
  "api-gateway" -> "payment-service" [label="/charge [t=200ms]", style=solid];
  "order-service" -> "catalog-service" [label="/items/batch (per-item) [t=100ms, f=600/min]", style=solid];
  "auth-service" -> "user-service" [label="/users/{id}", style=solid];
  "user-service" -> "billing-service" [label="/invoices/{id}", style=solid];
  "billing-service" -> "auth-service" [label="/roles/{id}", style=solid];
  "order-service" -> "payment-service" [label="/charge", style=solid];
  "payment-service" -> "email-service" [label="payments.receipts", style=dashed];
  "order-service" -> "notification-service" [label="order.events", style=dashed];
  "auth-service" -> "users-db" [style=dotted, label="RW"];
  "user-service" -> "users-db" [style=dotted, label="RW"];
  "user-service" -> "orders-db" [style=dotted, label="R"];
  "order-service" -> "orders-db" [style=dotted, label="RW"];
  "payment-service" -> "payments-db" [style=dotted, label="RW"];
  "catalog-service" -> "shared-catalog-db" [style=dotted, label="RW"];
  "search-service" -> "shared-catalog-db" [style=dotted, label="RW"];
  "billing-service" -> "payments-db" [style=dotted, label="R"];
}
