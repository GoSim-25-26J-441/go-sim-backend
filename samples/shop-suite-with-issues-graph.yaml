services:
  - name: api-gateway
    calls:
      - to: user-service
        endpoints: ["GET /users/:id"]
        rate_per_min: 600
      - to: billing-service
        endpoints: ["POST /bill"]
        rate_per_min: 300
  - name: user-service
    calls:
      - to: auth-service
        endpoints: ["POST /verify"]
        rate_per_min: 600
    databases:
      reads: [users-db]
      writes: []
  - name: auth-service
    databases:
      reads: [users-db]
      writes: [users-db] # owner inferred as writer
  - name: billing-service
    calls:
      - to: payment-service
        endpoints: ["POST /charge"]
        rate_per_min: 500
    databases:
      reads: [payments-db]
      writes: []
  - name: payment-service
    databases:
      reads: []
      writes: [payments-db]

databases:
  - name: users-db
  - name: payments-db
