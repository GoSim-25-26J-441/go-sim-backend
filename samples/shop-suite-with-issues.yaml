services:
  api-gateway:
    calls:
      [
        auth-service,
        user-service,
        order-service,
        catalog-service,
        search-service,
        payment-service,
      ]
  auth-service:
    calls: [user-service]
    writes: [users-db]
  user-service:
    calls: [billing-service] # part of cycle
    writes: [users-db] # shared_db_writes (future rule)
  billing-service:
    calls: [auth-service] # cycle: auth -> user -> billing -> auth
    reads: [payments-db]
  payment-service:
    writes: [payments-db]
  order-service:
    calls: [catalog-service]
    chatty_calls:
      catalog-service: 600
  catalog-service:
    calls: [order-service] # tight-coupling (mutual) (future rule)
  search-service:
    calls: [catalog-service]
