services:
  - name: api-gateway
    calls:
      - to: user-service
        endpoints: ["GET /users/:id"]
        rate_per_min: 120
      - to: catalog-service
        endpoints: ["GET /catalog/:id"]
        rate_per_min: 90
      - to: order-service
        endpoints: ["POST /orders"]
        rate_per_min: 60
    databases:
      reads: []
      writes: []

  - name: user-service
    calls: []
    databases:
      reads: [users-db]
      writes: [users-db]

  - name: catalog-service
    calls: []
    databases:
      reads: [catalog-db]
      writes: [catalog-db]

  - name: order-service
    calls:
      - to: payment-service
        endpoints: ["POST /payments"]
        rate_per_min: 80
      - to: shipping-service
        endpoints: ["POST /shipments"]
        rate_per_min: 40
    databases:
      reads: [orders-db]
      writes: [orders-db]

  - name: payment-service
    calls: []
    databases:
      reads: [payments-db]
      writes: [payments-db]

  - name: shipping-service
    calls: []
    databases:
      reads: [shipping-db]
      writes: [shipping-db]

databases:
  - name: users-db
  - name: catalog-db
  - name: orders-db
  - name: payments-db
  - name: shipping-db
